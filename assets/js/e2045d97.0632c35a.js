"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[75243],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},72118:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={sidebar_position:2},o="NFT Ownership API",l={unversionedId:"examples/nft/nft-ownership-api",id:"examples/nft/nft-ownership-api",title:"NFT Ownership API",description:"The NFT Ownership API can be used to retrieve information about the ownership of a specific NFT ( Non-Fungible Token ) on the supported blockchain. For instance using this we can access the owners of an NFT including their addresses and associated metadata and also we can retrieve a list of the top holders of a particular NFT.",source:"@site/docs/examples/nft/nft-ownership-api.md",sourceDirName:"examples/nft",slug:"/examples/nft/nft-ownership-api",permalink:"/docs/examples/nft/nft-ownership-api",draft:!1,editUrl:"https://github.com/bitquery/streaming-data-platform-docs/tree/main/docs/examples/nft/nft-ownership-api.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"NFT API",permalink:"/docs/examples/nft/nft-api"},next:{title:"NFT Transfer API",permalink:"/docs/examples/nft/nft-transfer-api"}},s={},p=[{value:"Get NFT Owners",id:"get-nft-owners",level:2},{value:"Top Holders of an NFT",id:"top-holders-of-an-nft",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"nft-ownership-api"},"NFT Ownership API"),(0,r.kt)("p",null,"The NFT Ownership API can be used to retrieve information about the ownership of a specific NFT ( Non-Fungible Token ) on the supported blockchain. For instance using this we can access the owners of an NFT including their addresses and associated metadata and also we can retrieve a list of the top holders of a particular NFT."),(0,r.kt)("h2",{id:"get-nft-owners"},"Get NFT Owners"),(0,r.kt)("p",null,"This query fetches the most recent owner of the NFT. The API leverages the BalanceUpdates method, which keeps track of all balance updates. Alternatively, you can achieve similar results by utilizing the Transfers API."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'query MyQuery {\n  EVM(dataset: combined, network: eth) {\n    BalanceUpdates(\n      orderBy: {descending: Block_Time}\n      limit: {count: 1}\n      where: {BalanceUpdate: {Id: {eq: "9996"}}, Currency: {Fungible: false, SmartContract: {is: "0x8a90cab2b38dba80c64b7734e58ee1db38b8992e"}}}\n    ) {\n      Currency {\n        Name\n        SmartContract\n      }\n      BalanceUpdate {\n        Address\n        Amount\n        Id\n      }\n      Block {\n        Number\n        Date\n      }\n    }\n  }\n}\n\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"network")," : This specifies the Ethereum network to use."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dataset")," : This specifies the dataset to use. In this case, the dataset is ",(0,r.kt)("a",{parentName:"li",href:"/docs/graphql/dataset/combined"},"combined"),". "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"limit")," : Specifies the maximum results to return. In this query, the limit is 1."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"orderBy")," : Results are in descending order by Block_Time."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"where"),' : This parameter allows you to filter the results based on specific conditions. In this case, the token ID is "9996" and the Currency is non-fungible, with the Smart Contract being ',(0,r.kt)("inlineCode",{parentName:"li"},"0x8a90cab2b38dba80c64b7734e58ee1db38b8992e"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned Data")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Currency")," : Specifies the NFT currency. ",(0,r.kt)("inlineCode",{parentName:"li"},"Name")," represents the currency name, and ",(0,r.kt)("inlineCode",{parentName:"li"},"SmartContract")," contains its smart contract address."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BalanceUpdate")," : Contains the address of the NFT holder, along with the amount and ID of the token involved in the balance update."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Block")," : Includes the block number and date.")),(0,r.kt)("p",null,"You can find the graphql query ",(0,r.kt)("a",{parentName:"p",href:"https://ide.bitquery.io/Who-owns-specific-NFT"},"here"),"."),(0,r.kt)("h2",{id:"top-holders-of-an-nft"},"Top Holders of an NFT"),(0,r.kt)("p",null,"Let's see an example showcasing the retrieval of the top 10 holders for a particular NFT, with their balances."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'query MyQuery {\n  EVM(dataset: combined, network: eth) {\n    BalanceUpdates(\n      orderBy: {descendingByField: "Balance"}\n      limit: {count: 10}\n      where: {Currency: {SmartContract: {is: "0x7dD4F223D9155F412790D696Fa30923489d4Ad34"}}}\n    ) {\n      BalanceUpdate {\n        Address\n      }\n      Balance: sum(of: BalanceUpdate_Amount, selectWhere: {gt: "0"})\n    }\n  }\n}\n')),(0,r.kt)("p",null,"In this query, you'll need to replace ",(0,r.kt)("inlineCode",{parentName:"p"},"0x7dD4F223D9155F412790D696Fa30923489d4Ad34")," with the contract address of the NFT you'd like to retrieve top holders for."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dataset")," : Specifies combined dataset that includes both realtime & archive data."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"network")," : Specifies that the Ethereum network is being queried."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"orderBy"),' :  Orders the results based on the "Balance" field in descending order, meaning the holder with highest balance will appear first.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"limit")," : Limits the number of results returned to 10."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"where")," : It filters the query results based on the NFT smart contract address ",(0,r.kt)("inlineCode",{parentName:"li"},"0x7dD4F223D9155F412790D696Fa30923489d4Ad34")," . ",(0,r.kt)("inlineCode",{parentName:"li"},'Currency: {SmartContract: {is: ""}}')," specifies the filter for the smart contract address.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returned Data")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Balance")," : Specifies the balance amount in the results."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BalanceUpdate")," : The ",(0,r.kt)("inlineCode",{parentName:"li"},"Address")," field specifies the address who holds the NFT.")),(0,r.kt)("p",null,"You can find the graphql query ",(0,r.kt)("a",{parentName:"p",href:"https://ide.bitquery.io/top-token-holders-of-Moonwalker-NFT"},"here"),"."))}u.isMDXComponent=!0}}]);