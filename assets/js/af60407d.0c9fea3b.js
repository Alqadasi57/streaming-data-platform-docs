"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[86735],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>f});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(r),m=a,f=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return r?n.createElement(f,o(o({ref:t},d),{},{components:r})):n.createElement(f,o({ref:t},d))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},49759:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=r(87462),a=(r(67294),r(3905));const i={sidebar_position:2},o="Trading Pairs API",l={unversionedId:"examples/dextrades/get-trading-pairs-of-token",id:"examples/dextrades/get-trading-pairs-of-token",title:"Trading Pairs API",description:"If you want to get all trades of a token, you might want to know all its trading pairs.",source:"@site/docs/examples/dextrades/get-trading-pairs-of-token.md",sourceDirName:"examples/dextrades",slug:"/examples/dextrades/get-trading-pairs-of-token",permalink:"/docs/examples/dextrades/get-trading-pairs-of-token",draft:!1,editUrl:"https://github.com/bitquery/streaming-data-platform-docs/tree/main/docs/examples/dextrades/get-trading-pairs-of-token.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Dex Trades",permalink:"/docs/category/dex-trades"},next:{title:"Getting Latest Pairs",permalink:"/docs/examples/dextrades/latest-trading-pairs-api"}},s={},c=[{value:"Get all pairs of a token across different DEXs",id:"get-all-pairs-of-a-token-across-different-dexs",level:2},{value:"Get all pairs of a token from a specific DEX",id:"get-all-pairs-of-a-token-from-a-specific-dex",level:2}],d={toc:c},p="wrapper";function u(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"trading-pairs-api"},"Trading Pairs API"),(0,a.kt)("p",null,"If you want to get all trades of a token, you might want to know all its trading pairs.\nProtocols like Uniswap have pairs or pools. In this section we will see how we can get all pairs of currency for DEXs."),(0,a.kt)("h2",{id:"get-all-pairs-of-a-token-across-different-dexs"},"Get all pairs of a token across different DEXs"),(0,a.kt)("p",null,"Let's get all pairs of the ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.bitquery.io/ethereum/token/0x5283d291dbcf85356a21ba090e6db59121208b44"},"BLUR token"),". In the following query, we are not defining any DEX details; therefore, we will get pairs across DEXs supported by Bitquery.\nWe are just providing the BLUR token as buy currency."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n  EVM(dataset: combined, network: eth) {\n    DEXTrades(\n      where: {Trade: {Buy: {Currency: {SmartContract: {is: "0x5283d291dbcf85356a21ba090e6db59121208b44"}}}}}\n      limit: {count: 10}\n      limitBy: {by: Trade_Sell_Currency_SmartContract, count: 1}\n    ) {\n      Trade {\n        Dex {\n          ProtocolName\n          OwnerAddress\n          ProtocolVersion\n          Pair {\n            SmartContract\n            Name\n            Symbol\n          }\n        }\n        Buy {\n          Currency {\n            Name\n            SmartContract\n          }\n        }\n        Sell {\n          Currency {\n            Name\n            SmartContract\n          }\n        }\n      }\n    }\n  }\n}\n\n')),(0,a.kt)("p",null,"Open the above query on GraphQL IDE using this ",(0,a.kt)("a",{parentName:"p",href:"https://graphql.bitquery.io/ide/Pair-tokens-for-BLUR-token-for-all-DEXs_1"},"link")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dataset: combined"),": specifies that the data should be retrieved from a combined dataset, which includes both historical and realtime data."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"network: eth"),": specifies that the data should be retrieved from the Ethereum network."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"DEXTrades"),": specifies that we want to retrieve information on DEX trades."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"where"),": specifies a filter to apply to the results. In this case, we're filtering by the buy currency's smart contract address, which is set to \"0x5283d291dbcf85356a21ba090e6db59121208b44\"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"limit"),": specifies the maximum number of results to return. In this case, we're limiting the results to 10."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"limitBy"),": specifies how to limit the results. In this case, we're limiting the results by the smart contract address of the sell currency, and we're only returning 1 result per smart contract.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Returned Data")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trade"),": represents the DEX trade, which includes information about the DEX itself (e.g. owner address, protocol version), the currency pair being traded (e.g. smart contract address, name, symbol), and the buy and sell currencies being exchanged (each represented as an object containing the currency's name and smart contract address)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Dex"),": represents the DEX itself, including the protocol name, owner address, and protocol version."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Buy"),": represents the currency being bought in the trade, including the currency's name and smart contract address."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Sell"),": represents the currency being sold in the trade, including the currency's name and smart contract address.")),(0,a.kt)("h2",{id:"get-all-pairs-of-a-token-from-a-specific-dex"},"Get all pairs of a token from a specific DEX"),(0,a.kt)("p",null,"Now, let's see an example of getting all pairs of a token for a specific DEX. In this example, we will get all pairs of the ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.bitquery.io/ethereum/token/0x5283d291dbcf85356a21ba090e6db59121208b44"},"BLUR token")," for the Uniswap v3 protocol; therefore, we will mention ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.bitquery.io/ethereum/smart_contract/0x1f98431c8ad98523631ae4a59f267346ea31f984/transactions"},"Uniswap v3 factory smart contract address"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n  EVM(dataset: combined, network: eth) {\n    DEXTrades(\n      where: {Trade: {Buy: {Currency: {SmartContract: {is: "0x5283d291dbcf85356a21ba090e6db59121208b44"}}}, Dex: {OwnerAddress: {is: "0x1f98431c8ad98523631ae4a59f267346ea31f984"}}}}\n      limit: {count: 10}\n      limitBy: {by: Trade_Sell_Currency_SmartContract, count: 1}\n    ) {\n      Trade {\n        Dex {\n          ProtocolName\n          OwnerAddress\n        }\n        Buy {\n          Currency {\n            Name\n            SmartContract\n          }\n        }\n        Sell {\n          Currency {\n            Name\n            SmartContract\n          }\n        }\n      }\n    }\n  }\n}\n')),(0,a.kt)("p",null,"Open the above query on GraphQL IDE using this ",(0,a.kt)("a",{parentName:"p",href:"https://graphql.bitquery.io/ide/pairs-of-blur-token-new-dataset_1"},"link")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dataset"),": The dataset to use for the query, in this case ",(0,a.kt)("inlineCode",{parentName:"li"},"combined")," which retrieves data from both historical and real-time sources."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"network"),": The blockchain network to retrieve data from, in this case ",(0,a.kt)("inlineCode",{parentName:"li"},"eth")," for Ethereum."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"where"),': A filter object to narrow down the results to only the trades that match the specified criteria. In this case, the filter object is used to retrieve trades where the buy currency smart contract address is "0x5283d291dbcf85356a21ba090e6db59121208b44" and the DEX owner address is "0x1f98431c8ad98523631ae4a59f267346ea31f984".'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"limit"),": The maximum number of results to return, in this case set to 10."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"limitBy"),": A grouping option to limit the number of results per group, in this case set to 1 for the smart contract address of the sell currency.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Returned Data:")),(0,a.kt)("p",null,"The query returns an object containing a list of DEX trades, each with the following fields:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Dex"),": An object containing information about the DEX, including the protocol name and owner address."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Buy"),": An object containing information about the buy currency, including the name and smart contract address."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Sell"),": An object containing information about the sell currency, including the name and smart contract address.")))}u.isMDXComponent=!0}}]);